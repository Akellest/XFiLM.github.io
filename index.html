<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Combined Tables</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
	<div id="prescriptum"></div>
    <div id="combinedTables"></div>

	<script>
		// Функция для загрузки таблицы из файла
		async function loadFile(filename, elementId) {
            try {
                const response = await fetch(filename);
                if (!response.ok) {
                    throw new Error(`Ошибка загрузки: ${response.statusText}`);
                }
                const data = await response.text();
                document.getElementById(elementId).innerHTML = data;
            } catch (error) {
                console.error('Ошибка:', error);
            }
        }

        // Загрузка файла prescriptum.html в div с id="prescriptum"
        loadFile('prescriptum.html', 'prescriptum');
		
		
		async function loadTable(filename) {
			try {
				const response = await fetch(filename);
				if (!response.ok) {
					throw new Error(`Ошибка загрузки: ${response.statusText}`);
				}
				const data = await response.text();
				const parser = new DOMParser();
				const doc = parser.parseFromString(data, 'text/html');
				const tableElement = doc.querySelector('table');

				if (!tableElement) {
					console.error(`Таблица не найдена в файле: ${filename}`);
					return '';
				}

				// Получаем название файла без расширения
				const className = filename.split('/').pop().split('.')[0];

				// Добавляем классы к таблице
				tableElement.classList.add(className);
				if (className !== 'table-header') { // Убедимся, что это не заголовок
					tableElement.classList.add('table');
				}

				// Возвращаем обновленное внешнее HTML таблицы
				return tableElement.outerHTML;
			} catch (error) {
				console.error('Ошибка загрузки таблицы:', error);
				return '';
			}
		}

		// Основная функция для объединения таблиц
		async function combineTables() {
			const tableFiles = ['table-header.html', 'quote0.html', 'table1.html', 'table2.html', 'table3.html'];
			const tablePromises = tableFiles.map(loadTable);

			const tables = await Promise.all(tablePromises);
			const combinedContent = tables.join(''); // Объединяем таблицы без отступов
			document.getElementById('combinedTables').innerHTML = combinedContent; // Вставляем в нужный элемент
			
			document.querySelectorAll('.third-column').forEach(cell => {
                // Проверяем, содержит ли ячейка русские символы
                if (/[а-яА-ЯЁё]/.test(cell.textContent)) {
                    cell.classList.add('russian'); // Если содержит русский текст, добавляем класс для русского шрифта
                } else {
                    cell.classList.add('english'); // Иначе добавляем класс для английского шрифта
                }
            });
		}

		// Вызываем основную функцию для объединения таблиц
		combineTables().then(() => {
            // Получаем все гиперссылки на странице
            const links = document.querySelectorAll('a');

            // Добавляем атрибут target="_blank" ко всем гиперссылкам
            links.forEach(link => {
                link.setAttribute('target', '_blank');
                link.setAttribute('rel', 'noopener noreferrer'); // Для безопасности
            });
        });
	</script>

<div id="combinedTables"></div>


</body>
</html>
